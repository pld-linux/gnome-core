diff -ur gnome-core-1.4.2.orig/aclocal.m4 gnome-core-1.4.2/aclocal.m4
--- gnome-core-1.4.2.orig/aclocal.m4	Mon Sep  9 20:09:13 2002
+++ gnome-core-1.4.2/aclocal.m4	Tue Dec  2 21:39:16 2003
@@ -354,8 +354,8 @@
   AC_DEFUN(X18T_KEYS_KIND, 
         ifelse([$2],[G2],[ -u ],[ $(XML_I18N_KEYS_KIND) ]))
 
-  XML_I18N_MERGE_DESKTOP_RULE='%.desktop:   %.desktop.in   $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d X18T_PFORG1'
-XML_I18N_MERGE_DIRECTORY_RULE='%.directory: %.directory.in $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d X18T_PFORG1'
+  XML_I18N_MERGE_DESKTOP_RULE='%.desktop:   %.desktop.in   $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d -u X18T_PFORG1'
+XML_I18N_MERGE_DIRECTORY_RULE='%.directory: %.directory.in $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d -u X18T_PFORG1'
      XML_I18N_MERGE_KEYS_RULE='%.keys:      %.keys.in      $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -k X18T_KEYS_KIND'
       XML_I18N_MERGE_OAF_RULE='%.oaf:       %.oaf.in       $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -o -p'
      XML_I18N_MERGE_PONG_RULE='%.pong:      %.pong.in      $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -x X18T_PFORG1'
diff -ur gnome-core-1.4.2.orig/desktop-links/Applications.directory.in gnome-core-1.4.2/desktop-links/Applications.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Applications.directory.in	Fri Oct 26 11:13:10 2001
+++ gnome-core-1.4.2/desktop-links/Applications.directory.in	Tue Dec  2 21:35:05 2003
@@ -3,3 +3,5 @@
 _Comment=Applications menu
 Icon=gnome-applications.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Browser.desktop.in gnome-core-1.4.2/desktop-links/Browser.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Browser.desktop.in	Sun Aug 25 23:47:35 2002
+++ gnome-core-1.4.2/desktop-links/Browser.desktop.in	Tue Dec  2 21:33:16 2003
@@ -4,5 +4,7 @@
 TryExec=netscape
 Exec=gnome-moz-remote --newwin ""
 Icon=gnome-html.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Development.directory.in gnome-core-1.4.2/desktop-links/Development.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Development.directory.in	Fri Oct 26 11:13:10 2001
+++ gnome-core-1.4.2/desktop-links/Development.directory.in	Tue Dec  2 21:35:02 2003
@@ -3,3 +3,5 @@
 _Comment=Tools for software development
 Icon=gnome-devel.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Emacs.desktop.in gnome-core-1.4.2/desktop-links/Emacs.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Emacs.desktop.in	Fri Oct 26 11:13:10 2001
+++ gnome-core-1.4.2/desktop-links/Emacs.desktop.in	Tue Dec  2 21:33:07 2003
@@ -4,5 +4,7 @@
 TryExec=emacs
 Exec=emacs
 Icon=gnome-emacs.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Eterm.desktop.in gnome-core-1.4.2/desktop-links/Eterm.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Eterm.desktop.in	Fri Oct 26 11:13:10 2001
+++ gnome-core-1.4.2/desktop-links/Eterm.desktop.in	Tue Dec  2 21:34:59 2003
@@ -4,5 +4,7 @@
 TryExec=Eterm
 Exec=Eterm
 Icon=gnome-eterm.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/FileRunner.desktop.in gnome-core-1.4.2/desktop-links/FileRunner.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/FileRunner.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/FileRunner.desktop.in	Tue Dec  2 21:33:01 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/GIMP.desktop.in gnome-core-1.4.2/desktop-links/GIMP.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/GIMP.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/GIMP.desktop.in	Tue Dec  2 21:34:52 2003
@@ -4,5 +4,7 @@
 TryExec=gimp
 Exec=gimp
 Icon=gnome-gimp.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/GXanim.desktop.in gnome-core-1.4.2/desktop-links/GXanim.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/GXanim.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/GXanim.desktop.in	Tue Dec  2 21:32:57 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Games.directory.in gnome-core-1.4.2/desktop-links/Games.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Games.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Games.directory.in	Tue Dec  2 21:37:59 2003
@@ -1,6 +1,8 @@
 [Desktop Entry]
 _Name=Games
-Name]ga]=Cluichí
+Name[ga]=CluichÃ­
 _Comment=Games menu
 Icon=gnome-joystick.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Gmc.desktop.in gnome-core-1.4.2/desktop-links/Gmc.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Gmc.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Gmc.desktop.in	Tue Dec  2 21:32:53 2003
@@ -4,5 +4,7 @@
 TryExec=gmc
 Exec=gmc
 Icon=gnome-folder.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Graphics.directory.in gnome-core-1.4.2/desktop-links/Graphics.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Graphics.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Graphics.directory.in	Tue Dec  2 21:34:29 2003
@@ -3,3 +3,5 @@
 _Comment=Graphics menu
 Icon=gnome-graphics.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Imlib_config.desktop.in gnome-core-1.4.2/desktop-links/Imlib_config.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Imlib_config.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Imlib_config.desktop.in	Tue Dec  2 21:32:40 2003
@@ -4,5 +4,7 @@
 TryExec=imlib_config
 Exec=imlib_config
 Icon=gnome-note.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Internet.directory.in gnome-core-1.4.2/desktop-links/Internet.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Internet.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Internet.directory.in	Tue Dec  2 21:34:26 2003
@@ -3,4 +3,5 @@
 _Comment=Programs for Internet and networks
 Icon=gnome-networktool.png
 Type=Directory
-
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Kterm.desktop.in gnome-core-1.4.2/desktop-links/Kterm.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Kterm.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Kterm.desktop.in	Tue Dec  2 21:35:58 2003
@@ -4,5 +4,7 @@
 TryExec=kterm
 Exec=kterm
 Icon=kterm.xpm
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Multimedia.directory.in gnome-core-1.4.2/desktop-links/Multimedia.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Multimedia.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Multimedia.directory.in	Tue Dec  2 21:35:52 2003
@@ -3,3 +3,5 @@
 _Comment=Multimedia menu
 Icon=gnome-multimedia.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Root.directory.in gnome-core-1.4.2/desktop-links/Root.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Root.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Root.directory.in	Tue Dec  2 21:34:17 2003
@@ -3,3 +3,5 @@
 _Comment=Programs menu
 Icon=gnome-folder.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Settings.directory.in gnome-core-1.4.2/desktop-links/Settings.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Settings.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Settings.directory.in	Tue Dec  2 21:35:49 2003
@@ -3,3 +3,5 @@
 _Comment=Desktop Settings
 Icon=gnome-settings.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/System.directory.in gnome-core-1.4.2/desktop-links/System.directory.in
--- gnome-core-1.4.2.orig/desktop-links/System.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/System.directory.in	Tue Dec  2 21:34:14 2003
@@ -3,3 +3,5 @@
 _Comment=System menu
 Icon=gnome-term.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/TkSETI.desktop.in gnome-core-1.4.2/desktop-links/TkSETI.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/TkSETI.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/TkSETI.desktop.in	Tue Dec  2 21:35:46 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Tkrat.desktop.in gnome-core-1.4.2/desktop-links/Tkrat.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Tkrat.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Tkrat.desktop.in	Tue Dec  2 21:34:10 2003
@@ -4,5 +4,7 @@
 TryExec=tkrat
 Exec=tkrat
 Icon=gnome-balsa2.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/UNIX-regular.desktop.in gnome-core-1.4.2/desktop-links/UNIX-regular.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/UNIX-regular.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/UNIX-regular.desktop.in	Tue Dec  2 21:35:43 2003
@@ -4,5 +4,7 @@
 TryExec=xterm
 Exec=xterm
 Icon=gnome-xterm.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/UNIX.desktop.in gnome-core-1.4.2/desktop-links/UNIX.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/UNIX.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/UNIX.desktop.in	Tue Dec  2 21:34:04 2003
@@ -4,5 +4,7 @@
 TryExec=nxterm
 Exec=nxterm
 Icon=gnome-color-xterm.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Utilities.directory.in gnome-core-1.4.2/desktop-links/Utilities.directory.in
--- gnome-core-1.4.2.orig/desktop-links/Utilities.directory.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Utilities.directory.in	Tue Dec  2 21:35:37 2003
@@ -3,3 +3,5 @@
 _Comment=Utilities menu
 Icon=gnome-util.png
 Type=Directory
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Vim.desktop.in gnome-core-1.4.2/desktop-links/Vim.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Vim.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Vim.desktop.in	Tue Dec  2 21:33:55 2003
@@ -4,5 +4,7 @@
 TryExec=gvim
 Exec=gvim
 Icon=gtkvim.png
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Vnterm.desktop.in gnome-core-1.4.2/desktop-links/Vnterm.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Vnterm.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/Vnterm.desktop.in	Tue Dec  2 21:35:34 2003
@@ -4,5 +4,7 @@
 TryExec=vnterm
 Exec=vnterm
 Icon=vnterm.xpm
-Terminal=0
+Terminal=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/WordPerfect.desktop.in gnome-core-1.4.2/desktop-links/WordPerfect.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/WordPerfect.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/WordPerfect.desktop.in	Tue Dec  2 21:33:45 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/XEphem.desktop.in gnome-core-1.4.2/desktop-links/XEphem.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/XEphem.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/XEphem.desktop.in	Tue Dec  2 21:35:25 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/XMcd.desktop.in gnome-core-1.4.2/desktop-links/XMcd.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/XMcd.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/XMcd.desktop.in	Tue Dec  2 21:33:40 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/Xemacs.desktop.in gnome-core-1.4.2/desktop-links/Xemacs.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/Xemacs.desktop.in	Mon Jun 10 23:18:02 2002
+++ gnome-core-1.4.2/desktop-links/Xemacs.desktop.in	Tue Dec  2 21:35:22 2003
@@ -8,3 +8,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/gaspell.desktop.in gnome-core-1.4.2/desktop-links/gaspell.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/gaspell.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/gaspell.desktop.in	Tue Dec  2 21:33:37 2003
@@ -5,3 +5,5 @@
 Exec=gaspell
 Terminal=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/lynx.desktop.in gnome-core-1.4.2/desktop-links/lynx.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/lynx.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/lynx.desktop.in	Tue Dec  2 21:35:19 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/realplayer.desktop.in gnome-core-1.4.2/desktop-links/realplayer.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/realplayer.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/realplayer.desktop.in	Tue Dec  2 21:33:34 2003
@@ -4,5 +4,7 @@
 TryExec=realplay
 Exec=realplay
 Icon=/usr/local/libexec/RealPlayer7/rp7.xpm
-Terminal=0
+Terminal=false
 Type=Applications
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/rxvt.desktop.in gnome-core-1.4.2/desktop-links/rxvt.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/rxvt.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/rxvt.desktop.in	Tue Dec  2 21:35:15 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/xcolsel.desktop.in gnome-core-1.4.2/desktop-links/xcolsel.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/xcolsel.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/xcolsel.desktop.in	Tue Dec  2 21:33:25 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application  
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/xmix.desktop.in gnome-core-1.4.2/desktop-links/xmix.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/xmix.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/xmix.desktop.in	Tue Dec  2 21:35:12 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
diff -ur gnome-core-1.4.2.orig/desktop-links/xv.desktop.in gnome-core-1.4.2/desktop-links/xv.desktop.in
--- gnome-core-1.4.2.orig/desktop-links/xv.desktop.in	Fri Oct 26 11:13:11 2001
+++ gnome-core-1.4.2/desktop-links/xv.desktop.in	Tue Dec  2 21:33:22 2003
@@ -7,3 +7,5 @@
 Terminal=false
 MultipleArgs=false
 Type=Application 
+Encoding=UTF-8
+# vi: encoding=utf-8
--- gnome-core-1.4.2/acinclude.m4.old	Tue Dec  2 22:35:05 2003
+++ gnome-core-1.4.2/acinclude.m4	Tue Dec  2 22:34:50 2003
@@ -0,0 +1,135 @@
+## xml-i18n-tools.m4 - Configure xml-i18n-tools for the target system. -*-Shell-script-*-
+## Copyright (C) 2001 Eazel, Inc.
+## Author: Maciej Stachowiak <mjs@noisehavoc.org>
+##
+## This program is free software; you can redistribute it and/or modify
+## it under the terms of the GNU General Public License as published by
+## the Free Software Foundation; either version 2 of the License, or
+## (at your option) any later version.
+##
+## This program is distributed in the hope that it will be useful, but
+## WITHOUT ANY WARRANTY; without even the implied warranty of
+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+## General Public License for more details.
+##
+## You should have received a copy of the GNU General Public License
+## along with this program; if not, write to the Free Software
+## Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+##
+## As a special exception to the GNU General Public License, if you
+## distribute this file as part of a program that contains a
+## configuration script generated by Autoconf, you may include it under
+## the same distribution terms that you use for the rest of that program.
+
+AC_DEFUN(XML_I18N_TOOLS_NEWER_THAN_0_9,[ true ])
+
+dnl AC_PROG_XML_I18N_TOOLS([MINIMUM-VERSION [,"G2" if always using --utf8] ])
+# serial 1 AC_PROG_XML_I18N_TOOLS
+AC_DEFUN(AC_PROG_XML_I18N_TOOLS,
+[
+  AC_DEFUN(X18T_PFORG1,  dnl and -u for G2
+        ifelse([$2],[G2],[ -u ], [ -p ]))
+  AC_DEFUN(X18T_XML_KIND, 
+        ifelse([$2],[G2],[ -u ],[ $(XML_I18N_XML_KIND) ]))
+  AC_DEFUN(X18T_KEYS_KIND, 
+        ifelse([$2],[G2],[ -u ],[ $(XML_I18N_KEYS_KIND) ]))
+
+  XML_I18N_MERGE_DESKTOP_RULE='%.desktop:   %.desktop.in   $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d -u X18T_PFORG1'
+XML_I18N_MERGE_DIRECTORY_RULE='%.directory: %.directory.in $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d -u X18T_PFORG1'
+     XML_I18N_MERGE_KEYS_RULE='%.keys:      %.keys.in      $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -k X18T_KEYS_KIND'
+      XML_I18N_MERGE_OAF_RULE='%.oaf:       %.oaf.in       $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -o -p'
+     XML_I18N_MERGE_PONG_RULE='%.pong:      %.pong.in      $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -x X18T_PFORG1'
+   XML_I18N_MERGE_SERVER_RULE='%.server:    %.server.in    $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -o -u'
+    XML_I18N_MERGE_SHEET_RULE='%.sheet:     %.sheet.in     $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -x -u'
+XML_I18N_MERGE_SOUNDLIST_RULE='%.soundlist: %.soundlist.in $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -d X18T_PFORG1'
+      XML_I18N_MERGE_XML_RULE='%.xml:       %.xml.in       $(top_builddir)/xml-i18n-merge $(wildcard $(top_srcdir)/po/*.po) ; $(top_builddir)/xml-i18n-merge $(top_srcdir)/po $< [$]@ -x X18T_XML_KIND'
+
+AC_SUBST(XML_I18N_MERGE_DESKTOP_RULE)
+AC_SUBST(XML_I18N_MERGE_DIRECTORY_RULE)
+AC_SUBST(XML_I18N_MERGE_KEYS_RULE)
+AC_SUBST(XML_I18N_MERGE_OAF_RULE)
+AC_SUBST(XML_I18N_MERGE_PONG_RULE)
+AC_SUBST(XML_I18N_MERGE_SERVER_RULE)
+AC_SUBST(XML_I18N_MERGE_SHEET_RULE)
+AC_SUBST(XML_I18N_MERGE_SOUNDLIST_RULE)
+AC_SUBST(XML_I18N_MERGE_XML_RULE)
+
+# Use the tools built into the package, not the ones that are installed.
+
+XML_I18N_EXTRACT='$(top_builddir)/xml-i18n-extract'
+AC_SUBST(XML_I18N_EXTRACT)dnl
+
+XML_I18N_MERGE='$(top_builddir)/xml-i18n-merge'
+AC_SUBST(XML_I18N_MERGE)dnl
+
+XML_I18N_UPDATE='$(top_builddir)/xml-i18n-update'
+AC_SUBST(XML_I18N_UPDATE)dnl
+
+AC_PATH_PROG(INTLTOOL_PERL, perl)
+if test -z "$INTLTOOL_PERL"; then
+   AC_MSG_ERROR([perl not found; required for xml-i18n-tools])
+fi
+if test -z "`$INTLTOOL_PERL -v | fgrep '5.' 2> /dev/null`"; then
+   AC_MSG_ERROR([perl 5.x required for xml-i18n-tools])
+fi
+
+dnl Remove Intltool [] tags from po/POTFILES
+dnl
+ifdef([AC_DIVERSION_ICMDS],[
+  AC_DIVERT_PUSH(AC_DIVERSION_ICMDS)
+      changequote(,)
+      mv -f po/POTFILES po/POTFILES.tmp
+      sed -e 's/\[.*\] *//' < po/POTFILES.tmp > po/POTFILES
+      rm -f po/POTFILES.tmp
+      changequote([,])
+  AC_DIVERT_POP()
+],[
+  ifdef([AC_CONFIG_COMMANDS_PRE],[
+    AC_CONFIG_COMMANDS_PRE([
+        changequote(,)
+        mv -f po/POTFILES po/POTFILES.tmp
+        sed -e 's/\[.*\] *//' < po/POTFILES.tmp > po/POTFILES
+        rm -f po/POTFILES.tmp
+        changequote([,])
+    ])
+  ])
+])
+
+dnl  manually sed perl in so people don't have to put the xml-i18n-tools scripts in their 
+dnl  AC_OUTPUT
+AC_OUTPUT_COMMANDS([
+sed -e "s:@INTLTOOL_PERL@:${INTLTOOL_PERL}:;" < ${srcdir}/xml-i18n-extract.in > xml-i18n-extract.out
+if cmp -s xml-i18n-extract xml-i18n-extract.out 2>/dev/null; then
+  rm -f xml-i18n-extract.out
+else
+  mv -f xml-i18n-extract.out xml-i18n-extract
+fi
+chmod ugo+x xml-i18n-extract
+chmod u+w xml-i18n-extract
+
+sed -e "s:@INTLTOOL_PERL@:${INTLTOOL_PERL}:;" < ${srcdir}/xml-i18n-merge.in > xml-i18n-merge.out
+if cmp -s xml-i18n-merge xml-i18n-merge.out 2>/dev/null; then
+  rm -f xml-i18n-merge.out
+else
+  mv -f xml-i18n-merge.out xml-i18n-merge
+fi
+chmod ugo+x xml-i18n-merge
+chmod u+w xml-i18n-merge
+
+sed -e "s:@INTLTOOL_PERL@:${INTLTOOL_PERL}:;" < ${srcdir}/xml-i18n-update.in > xml-i18n-update.out
+if cmp -s xml-i18n-update xml-i18n-update.out 2>/dev/null; then
+  rm -f xml-i18n-update.out
+else
+  mv -f xml-i18n-update.out xml-i18n-update
+fi
+chmod ugo+x xml-i18n-update
+chmod u+w xml-i18n-update
+], INTLTOOL_PERL=${INTLTOOL_PERL})
+
+# Redirect the config.log output again, so that the ltconfig log is not
+# clobbered by the next message.
+exec 5>>./config.log
+])
+
+dnl old names
+AC_DEFUN(AM_PROG_XML_I18N_TOOLS, [indir([AC_PROG_XML_I18N_TOOLS])])dnl
